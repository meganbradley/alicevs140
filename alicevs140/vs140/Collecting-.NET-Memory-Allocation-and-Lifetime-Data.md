---
title: "Collecting .NET Memory Allocation and Lifetime Data"
ms.custom: na
ms.date: 09/19/2016
ms.prod: visual-studio-dev14
ms.reviewer: na
ms.suite: na
ms.technology: 
  - vs-ide-debug
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 62a6dd5f-db66-4456-9d57-f8913dbfe4d5
caps.latest.revision: 20
translation.priority.ht: 
  - de-de
  - ja-jp
---
# Collecting .NET Memory Allocation and Lifetime Data
[!INCLUDE[vsprvs](../vs140/includes/vsprvs_md.md)] Profiling Tools support the collection of .NET memory allocation and object lifetime data, which helps you detect memory-related performance issues in your application.  
  
-   Data about .NET memory allocation includes the size and number of .NET Framework memory objects that were allocated.  
  
-   Object lifetime data includes the size and number of .NET Framework memory objects that were reclaimed in the three garbage collection generations.  
  
 **Requirements**  
  
-   [!INCLUDE[vsUltLong](../vs140/includes/vsUltLong_md.md)], [!INCLUDE[vsPreLong](../vs140/includes/vsPreLong_md.md)], [!INCLUDE[vsPro](../vs140/includes/vsPro_md.md)]  
  
> [!NOTE]
>  Enhanced security features in Windows 8 and Windows Server 2012 required significant changes in the way the Visual Studio profiler collects data on these platforms. Windows Store apps also require new collection techniques. See [Profiling Windows 8 and Windows Server 2012 applications](../vs140/Performance-Tools-on-Windows-8-and-Windows-Server-2012-applications.md).  
  
 You can collect data by using either the sampling or the instrumentation profiling method.  
  
-   When you use the sampling method, the profiler tracks all .NET memory allocations and objects that are generated by the process that was started or attached to.  
  
-   When you use the instrumentation method, the profiler tracks only those .NET memory allocations and objects that are generated by the instrumented modules.  
  
> [!IMPORTANT]
>  When you are collecting .NET memory data (allocations, object lifetimes, or both) by using the sampling method, all user-specified sampling events are ignored, and the appropriate memory allocation events are used to collect data.  
  
 If you enable the profiling of.NET memory allocation, you also enable the Allocation View. If you enable the profiling of .NET lifetime data, you also enable the Objects Lifetime View. For more information, see [Allocation View](../vs140/.NET-Memory-Allocations-View.md) and [Objects Lifetime View](../vs140/Object-Lifetime-View.md).  
  
 For information about how to collect .NET memory data by using the Profiling Tools command-line tools, see Using .NET Memory Methods to Collect Memory Allocation and Object Lifetime Data in [Using Profiling Methods to Collect Performance Data from the Command Line](../vs140/Using-Profiling-Methods-to-Collect-Performance-Data-from-the-Command-Line.md).  
  
### To collect .NET memory data  
  
1.  In **Performance Explorer**, right-click the performance session, and then click **Properties**.  
  
2.  On the *Performance Session***Property Pages** dialog box, click the **General** tab, and select the **Collect .NET object allocation information** check box.  
  
3.  To collect .NET object lifetime data, select the **Also collect .NET object lifetime information** check box.  
  
## Common Tasks  
 You can specify additional options in the *Performance Session***Property Pages** dialog box of the performance session. To open this dialog box:  
  
-   In **Performance Explorer**, right-click the performance session name, and then click **Properties**.  
  
 The tasks in the following table describe options that you can specify in the *Performance Session***Property Pages** dialog box when you collect .NET memory data.  
  
|Task|Related Content|  
|----------|---------------------|  
|On the **General** page, specify naming details for the generated profiling data (.vsp) file.|-   [Collecting .NET Memory Allocation and Lifetime Data](../vs140/Collecting-.NET-Memory-Allocation-and-Lifetime-Data.md)<br />-   [How to: Set Profiling Data File Options](../vs140/How-to--Set-Performance-Data-File-Name-Options.md)|  
|On the **Launch** page, choose the application to start if you have multiple .exe projects in your code solution.|-   [How to: Collect Interaction Data for Multi-Tiered Applications](../vs140/Collecting-tier-interaction-data.md)|  
|On the **Tier Interaction** page, add ADO.NET call data to the profiling run.|-   [How to: Collect Interaction Data for Multi-Tiered Applications](../vs140/Collecting-tier-interaction-data.md)|  
|On the **Windows Events** page, specify one or more Event Tracing for Windows (ETW) events to collect with the sampling data.|-   [How to: Collect Event Trace (ETW) Data](../vs140/How-to--Collect-Event-Tracing-for-Windows--ETW--Data.md)|  
|On the **Windows Counters** page, specify one or more operating system performance counters to add to the profiling data as marks.|-   [How to: Collect Windows Counter Data](../vs140/How-to--Collect-Windows-Counter-Data.md)|  
|On the **Advanced** page, specify the version of the .NET Framework runtime to profile if your application modules use multiple versions. By default, the first version loaded is profiled.|-   [How to: Specify the .NET Framework Runtime to Profile in Side by Side Scenarios](../vs140/How-to--Specify-the-.NET-Framework-Runtime.md)|  
  
## Instrumentation Tasks  
 The tasks in the following table are options in the **Property Pages** dialog box that are specific to profiling with the instrumentation method.  
  
|Task|Related Content|  
|----------|---------------------|  
|On the **Binaries** page, specify a location for the instrumented copies of the modules. By default, the original binaries are moved to a backup folder.|-   [How to: Relocate Instrumented Binaries](../vs140/How-to--Relocate-Instrumented-Binaries.md)|  
|On the **Instrumentation** page, exclude small functions from profiling to reduce the profiling overhead, profile JavaScript code in ASP.NET Web pages, and specify commands to run at a command prompt before and after the instrumentation process.|-   [How to: Exclude or Include Short Functions from Instrumentation](../vs140/How-to--Exclude-or-Include-Short-Functions-from-Instrumentation.md)<br />-   [How to: Profile JavaScript (EMCA) Code in Web Client Pages](../vs140/How-to--Profile-JavaScript-Code-in-Web-Pages.md)<br />-   [How to: Specify Pre- and Post-Instrument Commands](../vs140/How-to--Specify-Pre--and-Post-Instrument-Commands.md)|  
|On the **CPU Counters** page, specify one or more processor performance counters to add to the profiling data.|-   [How to: Collect CPU Counter Data Using the Instrumentation Method](../vs140/How-to--Collect-CPU-Counter-Data.md)|  
|On the **Advanced** page, specify any additional VSInstr.exe options that you want, such as options to include or exclude specific functions. For more information about VSInstr options, see [VSInstr](../vs140/VSInstr.md)|-   [How to: Specify Additional Instrumentation Options](../vs140/How-to--Specify-Additional-Instrumentation-Options.md)<br />-   [How to: Limit Instrumentation to Specific Functions](../vs140/How-to--Limit-Instrumentation-to-Specific-Functions.md)|  
  
## See Also  
 [Configuring Performance Sessions](../vs140/Configuring-Performance-Sessions.md)   
 [How to: Choose Collection Methods](../vs140/How-to--Choose-Collection-Methods.md)   
 [Performance Session Properties](../vs140/Performance-Session-Properties.md)